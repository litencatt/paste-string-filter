(()=>{"use strict";chrome.storage.local.set({filteredStr:"(filtered)",regexps:{mail:{regexp:"[\\w\\-._]+@[\\w\\-._]+\\.[A-Za-z]+",enable:!0},password:{regexp:"password:.*",enable:!0}}}),chrome.storage.local.get((e=>{console.log(e)})),document.addEventListener("paste",(async function(e){const t=window.document.activeElement;if(!t||!["TEXTAREA"].includes(t.nodeName))return!1;const r=t.value,o=t.selectionStart,l=t.selectionEnd;if(null===o||null===l)return!1;let n=e.clipboardData;if(!n)return!1;let s=n.getData("text");const a=await(async e=>new Promise(((t,r)=>{chrome.storage.local.get(e,(e=>{void 0!==chrome.extension.lastError&&r(chrome.extension.lastError),t(e)}))})))(["enable","filteredStr","regexps"]);if(!a.hasOwnProperty("enable"))return void console.log("enable is not set.");if(!a.enable)return void console.log("Filter is disable now.");const i=a.filteredStr;Object.keys(a.regexps).forEach((e=>{let t=new RegExp(a.regexps[e].regexp,"g");s=s.replace(t,i)})),t.value=r.slice(0,o)+s+r.slice(l),e.preventDefault()}))})();