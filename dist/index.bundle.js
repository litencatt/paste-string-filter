(()=>{"use strict";const e=async e=>new Promise(((t,r)=>{chrome.storage.local.get(e,(e=>{void 0!==chrome.extension.lastError&&r(chrome.extension.lastError),t(e)}))}));chrome.storage.local.set({filteredStr:"(filtered)",regexps:{mail:{regexp:"[\\w\\-._]+@[\\w\\-._]+\\.[A-Za-z]+",enable:!0},password:{regexp:"password:.*",enable:!0}}}),chrome.storage.local.get((e=>{console.log(e)})),document.addEventListener("paste",(async function(t){const r=window.document.activeElement;if(!r||!["TEXTAREA"].includes(r.nodeName))return!1;const o=r.value,l=r.selectionStart,n=r.selectionEnd;if(null===l||null===n)return!1;let a=t.clipboardData;if(!a)return!1;let s=a.getData("text"),i=await e(["enable"]);if(!i.hasOwnProperty("enable"))return void console.log("enable is not set.");if(!i.enable)return void console.log("Filter is disable now.");i=await e("filteredStr");const c=i.filteredStr;i=await e(["regexps"]),Object.keys(i.regexps).forEach((e=>{let t=new RegExp(i.regexps[e].regexp,"g");s=s.replace(t,c)})),r.value=o.slice(0,l)+s+o.slice(n),t.preventDefault()}))})();